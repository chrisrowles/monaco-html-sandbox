<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Monaco Sandbox Example</title>
    <meta name="description" content="A live sandbox editor based on Microsoft's monaco editor.">
    <meta name="keywords" content="HTML, CSS, JavaScript, Sandbox, Code, Microsoft, Monaco">
    <meta name="author" content="Chris Rowles">
    <meta property="og:title" content="Monaco Sandbox Example" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://code.rowles.ch" />
    <meta property="og:image" content="http://code.rowles.ch/screenshot.png" />
    <link rel="stylesheet" href="assets/main.css">
</head>
<body>
<div class="wrapper" x-data="manager()">
    <nav id="sidebar">
        <div class="sidebar-header">
            <h3>Monaco Sandbox</h3>
        </div>
        <ul class="list-unstyled components">
            <li>
                <a href="https://microsoft.github.io/monaco-editor/api/index.html">Monaco API</a>
            </li>
            <li>
                <a href="https://microsoft.github.io/monaco-editor/playground.html">Monaco Playground</a>
            </li>
        </ul>
        <ul class="list-unstyled subsection">
            <li>
                <button class="btn btn-dark w-100" @click.prevent="createShareableLink($editor.getModel())">
                    Share
                    <i class="ml-2 fas fa-share"></i>
                </button>
            </li>
            <li>
                <a href="https://github.com/chrisrowles" class="article mt-3">Built with ❤️ by CR</a>
            </li>
        </ul>
    </nav>
    <div id="content">
        <!-- menu & tabs -->
        <div class="tab-area">
            <ul class="nav nav-tabs p-0 rounded-0 mr-auto" id="lang-tabs">
                <li class="nav-item">
                    <a class="nav-link active" href="#" data-lang="html">HTML</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-lang="css">CSS</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-lang="javascript">JS</a>
                </li>
            </ul>
            <ul class="nav nav-tabs p-0 ml-auto">
                <li class="nav-link social border-0">
                    <a href="https://github.com/chrisrowles/monaco-sandbox">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
            </ul>
        </div>
        <!-- submenu -->
        <div class="py-2 bg-dark"></div>
        <!-- content -->
        <div class="sandbox-area">
            <!-- code editor area -->
            <div id="code-editor-container">
                <div id="code-editor"></div>
            </div>
            <!-- code output area -->
            <div id="code-executor-container">
                <iframe id="code-executor"></iframe>
            </div>
        </div>
    </div>
</div>
<script src="assets/main.js"></script>
<script defer src="https://unpkg.com/alpinejs@3.4.1/dist/cdn.min.js"></script>
<script>
    function manager() {
        return {
            content: '',
            language: '',
            createShareableLink(model) {
                this.setCurrentModelContent(model.getValue())
                this.setCurrentModelLanguage(model.getLanguageIdentifier().language)

                $api.saveCode({
                    content: this.content,
                    language: this.language
                }).then((response) => {
                    console.log(response)
                })
            },
            setCurrentModelLanguage(language) {
                this.language = language
            },
            setCurrentModelContent(content) {
                this.content = content
            }
        }
    }
</script>
</body>
</html>